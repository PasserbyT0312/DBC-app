<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="maximum-scale=1.0,minimum-scale=1.0,user-scalable=0,width=device-width,initial-scale=1.0" />
    <meta name="format-detection" content="telephone=no,email=no,date=no,address=no">
    <title>otc订单详情</title>
    <link rel="stylesheet" type="text/css" href="../../css/aui.css" />
    <link rel="stylesheet" type="text/css" href="../../css/base.css" />
    <link rel="stylesheet" type="text/css" href="../../css/custom.css" />
    <link rel="stylesheet" type="text/css" href="../../css/touchslider.css" />
    <link rel="stylesheet" type="text/css" href="../../css/coin.css" />
    <script src="../../script/const.js"></script>
    <style>
      html{
        font-size: 18px;
      }
        .com_head {
            background: #0852C4;
            font-size: 14px;
        }

        .top {
            background: #0852C4;
            font-size: 20px;
            color: #fff;
            padding: 0 15px 15px;
        }

        .orderNum {
            padding: 15px;
            background: #fff;
            margin-bottom: 10px;
        }

        .total {
            font-size: 20px;
            color: #0852C4;
            margin-bottom: 10px;
        }

        .title {
            font-size: 14px;
            color: #1F3F59;
        }

        .title label {
            color: #8FA2AF;
            width: 50px;
            display: inline-block;
        }

        .aui-list {
            border-top: 0;
        }

        .aui-list .aui-list-item {
            /*min-height: 3rem;*/
            border-color: #F0F2F4;
        }

        .aui-list .aui-list-item-title,.aui-list .aui-list-item-label{
            color: #8FA2AF;
            font-size: 14px;
        }

        .aui-list .aui-list-item-right, .aui-list .aui-list-item-input input{
            font-size: 14px;
            color: #1F3F59;
        }
        .btn_row{
          background: #fff;
          padding: 1rem;
          text-align: center;
          font-size: 14px;
          position: fixed;
          width: 100%;
          bottom: 0;
        }
        .btn_row .cancel{
          background: #F7F7FB;
          color: #23425C;
          width: 40%;
          padding: 10px 0;
        }
        .btn_row .paySuccess{
          background: #1882D4;
          color: #fff;
          width: 55%;
          padding: 10px 0;
        }
        .copyBtn{
          display: inline-block;
          width: 15px;
          height: 15px;
          vertical-align: middle;
        }
        .codeIcon{
          width: 25px;
          height: 25px;
        }
        /*遮罩*/
        div.mask{
          background: rgba(0, 0, 0, 0.5);
        }
      .overhide{
        overflow: hidden;
        height: 100%;
      }
      .codePop{
        position: fixed;
        z-index: 12;
        width:80%;
        height:65%;
        left: 50%;
        top: 50%;
        transform: translate(-50%,-50%);
        background: #fff;
        padding: 20px;
      }
      .codeImg{
        height: 89%;
        width: 100%;
      }
      .saveImg{
        background: #1882D4;
        color: #fff;
        text-align: center;
        padding: 10px 0;
        margin-top: 10px;
      }
      .closePop{
        width: 35px;
        height: 35px;
        margin: 0 auto;
        margin-top: 50px;
      }
    </style>
</head>

<body>
    <div id="app">
        <!--头部标题-->
        <header id="pack" class="aui-bar aui-bar-nav com_head">
            <div class="back_but" tapmode onclick="closeFrame()"></div>
        </header>
        <div class="top">
            {{orderStatus[status]}}
        </div>
        <div class="orderNum">
            <div class="total">¥ 2300.00 <img src="../../css/img/copy.png" alt="" class="copyBtn" @click="$A.copy(1111111)"></div>
            <div class="title"><label>单价</label>¥1473.20</div>
            <div class="title"><label>数量</label>1.561227 ETH</div>
        </div>
        <div class="payBox">
            <div v-show="status==0" class="aui-content aui-margin-b-15">
                <ul class="aui-list aui-list-in">
                    <li class="aui-list-item aui-list-item-middle">
                        <div class="aui-list-item-inner aui-list-item-arrow">
                            <div class="aui-list-item-title">支付宝</div>
                        </div>
                    </li>
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title">收款人</div>
                            <div class="aui-list-item-right">程家明 <img src="../../css/img/copy.png" alt="" class="copyBtn"></div>
                        </div>
                    </li>
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title">收款二维码</div>
                            <div class="aui-list-item-right"><img src="../../css/img/codeHave.png" alt="" class="codeIcon" @click="showCode"></div>
                        </div>
                    </li>
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title">支付宝账号</div>
                            <div class="aui-list-item-right">13069477367 <img src="../../css/img/copy.png" alt="" class="copyBtn"></div>
                        </div>
                    </li>
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title" style="color:#1F3F59;">请使用本人（*志伟）支付宝向以上账号自行转账</div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <div class="orderDetail">
            <div class="aui-content aui-margin-b-15">
                <ul class="aui-list aui-list-in">
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title">卖家昵称</div>
                            <div class="aui-list-item-right">这是一个昵称</div>
                        </div>
                    </li>
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title">卖家实名</div>
                            <div class="aui-list-item-right">陈伟志 <img src="../../css/img/copy.png" alt="" class="copyBtn"></div>
                        </div>
                    </li>
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title">订单号</div>
                            <div class="aui-list-item-right">115645711074257 <img src="../../css/img/copy.png" alt="" class="copyBtn"></div>
                        </div>
                    </li>
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title">付款参考号</div>
                            <div class="aui-list-item-right">334762 <img src="../../css/img/copy.png" alt="" class="copyBtn"></div>
                        </div>
                    </li>
                    <li class="aui-list-item">
                        <div class="aui-list-item-inner">
                            <div class="aui-list-item-title">下单时间</div>
                            <div class="aui-list-item-right">2018-08-17 14:22:05</div>
                        </div>
                    </li>
                </ul>
            </div>
        </div>
        <div v-show="status==0" class="btn_row flex-box-between">
            <div class="cancel" @click="cancelOrder">取消订单</div>
            <div class="paySuccess">我已付款成功</div>
        </div>

        <!-- 遮罩层-->
        <div v-show="isShow" class="codePop">
          <img src="../../css/img/1.png" alt="" class="codeImg">
          <div class="saveImg" @click="saveImg">保存二维码</div>
          <img src="../../css/img/close.png" alt="" class="closePop" @click="closeCode">
        </div>
</body>

<script type="text/javascript" src="../../script/lib/api.js"></script>
<script type="text/javascript" src="../../script/lib/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="../../script/lib/base.js"></script>
<script type="text/javascript" src="../../script/lib/vue.js"></script>
<script>
    var app = new Vue({
        el: "#app",
        data: {
          status:0,
          isShow:false,
          orderStatus:['请付款','已取消','已完成']
        },
        methods: {
            cancelOrder:function () {
              api.confirm({
                  title: '确认取消交易',
                  msg: '如果您已经向卖家付款，请千万不要取消交易',
                  buttons: ['確定', '取消']
              }, function (ret, err) {
                  if (ret.buttonIndex === 2) {
                      return;
                  }
                  api.closeFrame({});

              })
            },
            showCode:function () {
              $('html,body').addClass('overhide'); //使网页不可滚动
              this.isShow = true;
              $A.mask();
            },
            closeCode:function () {
              $('html,body').removeClass('overhide'); //使网页不可滚动
              this.isShow = false;
              $A.mask(false);
            },
            saveImg:function () {
              api.saveMediaToAlbum({
                  path: 'http://module.apicloud.com/icon/1492678073326_IMG_1345.PNG'
              }, function(ret, err) {
                  if (ret && ret.status) {
                      alert('保存成功');
                  } else {
                      alert('请允许DBC访问您的相册权限');
                  }
              });
            }
        }
    })
</script>

</html>
